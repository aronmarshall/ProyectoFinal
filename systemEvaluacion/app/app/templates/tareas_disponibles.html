{% extends "base.html" %}

{% block titulo %}Tareas Disponibles{% endblock %}

{% block encabezado %}
<div class="text-right">
    <form method="post" action="/logout">
        {% csrf_token %}
        <button type="submit" class="btn btn-personalizado">Cerrar Sesión</button>
    </form>
</div>
{% endblock %}

{% block contenido %}
<style>
    /* Estilos específicos para la página */
    .card-body {
        text-align: center;
        padding: 20px;
        border: 1px solid #ccc;
        background-color: #f9f9f9;
    }
    .card-body input[type="text"] {
        width: 100%;
        border: none;
        background-color: transparent;
        text-align: center;
        font-size: inherit;
        font-weight: inherit;
        color: inherit;
        padding: 0;
        margin-bottom: 10px;
    }
</style>

<h1 class="text-center">Tareas Disponibles</h1>

{% if messages %}
<ul class="list-unstyled">
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<div class="row">
    {% for tarea in tareas_validas %}
    <div class="col-md-4 mb-4">
        <div class="card">
            <div class="card-body">
                <form method="POST" action="/subir_tarea">
                    {% csrf_token %}
                    <input type="text" id="nombre_tarea" name="nombre_tarea" readonly value="{{ tarea.nombre }}">
                    
                    <p><strong>Inicio:</strong> {{ tarea.fecha_inicio }}</p>
                    <p><strong>Cierre:</strong> {{ tarea.fecha_cierre }}</p>

                    {% if tarea.estado_valido %}
                    <p class="text-success mb-3">Disponible</p>
                    <button type="submit" class="btn btn-primary btn-block">Ver detalles</button>
                    {% else %}
                    <p class="text-danger mb-3">No disponible</p>
                    <p>No puedes subir</p>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="mt-4">
    <h3>Puntajes</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Tarea</th>
                <th>Puntaje</th>
            </tr>
        </thead>
        <tbody>
            {% for entrega in puntaje_alumno %}
            <tr>
                <td>{{ entrega.tarea }}</td>
                <td>{{ entrega.puntaje }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
